package com.upiicsa.ApiSIP.Service;

import com.upiicsa.ApiSIP.Model.Catalogs.DocumentType;
import com.upiicsa.ApiSIP.Model.StudentProcess;
import com.upiicsa.ApiSIP.Repository.DocumentProcessRepository;
import com.upiicsa.ApiSIP.Repository.DocumentTypeRepository;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class DocumentTypeService {

    private DocumentTypeRepository typeRepository;
    private DocumentProcessRepository docProcessRepository;

    public DocumentTypeService (DocumentTypeRepository typeRepository,
                                DocumentProcessRepository docProcessRepository) {
        this.typeRepository = typeRepository;
        this.docProcessRepository = docProcessRepository;
    }

    public List<DocumentType> getRequiredTypes(StudentProcess process){

        return docProcessRepository.findDocumentTypesByProcessState(process.getProcessState());
    }

    public DocumentType getByDescription(String typeName){
        return typeRepository.findByDescription(typeName).orElse(null);
    }

}
