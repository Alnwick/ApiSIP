<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prácticas Profesionales - Panel</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            margin-top: 130px; /* Añadido: header (80px) + top-icons (50px) + espacio extra */
        }

        header {
            background: linear-gradient(135deg, #1A8C14 0%, #136b10 100%);
            padding: 15px 30px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .logo {
            height: 50px;
            filter: brightness(0) invert(1);
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .top-icons {
            display: flex;
            gap: 15px;
            align-items: center;
            padding: 10px 20px;
            background-color: #f8f8f8;
            border-bottom: 1px solid #ddd;
            flex-shrink: 0;
            border-radius: 8px;
            margin-bottom: 20px;
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            z-index: 999;
        }

        .icon {
            width: 28px;
            height: 28px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .icon:hover {
            transform: scale(1.1);
        }

        /* Barra de carreras - MODIFICADO: Ahora está más arriba y sin separación al hacer scroll */
        .careers-nav {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            position: sticky;
            top: 140px; /* Posicionar debajo de los iconos superiores */
            z-index: 998;
            margin-top: 0; /* Eliminar separación superior */
        }

        .careers-title {
            font-size: 18px;
            color: #1A8C14;
            margin-bottom: 15px;
            font-weight: 600;
            padding-bottom: 8px;
            border-bottom: 2px solid #eaeaea;
        }

        .careers-container {
            display: flex;
            flex-wrap: nowrap;
            gap: 8px;
            justify-content: flex-start;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .career-item {
            padding: 8px 12px;
            background-color: #f1f8ff;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: 500;
            text-align: center;
            white-space: nowrap;
            font-size: 13px;
            min-width: 120px;
            flex-shrink: 0;
        }

        .career-item:hover {
            background-color: #d4edda;
            border-color: #1A8C14;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(26, 140, 20, 0.2);
        }

        .career-item.active {
            background-color: #1A8C14;
            color: white;
            border-color: #136b10;
            box-shadow: 0 4px 12px rgba(26, 140, 20, 0.3);
        }

        /* Contenido de información - MODIFICADO: Recuadros más pequeños */
        .info-container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .info-title {
            font-size: 22px;
            color: #1A8C14;
            font-weight: 600;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: #f8f9fa;
            border-radius: 30px;
            padding: 8px 20px;
            width: 300px;
            border: 1px solid #e0e0e0;
        }

        .search-box input {
            border: none;
            background: transparent;
            width: 100%;
            padding: 8px;
            outline: none;
            font-size: 16px;
        }

        /* Selector de plan - NUEVO */
        .plan-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .plan-selector label {
            font-weight: 600;
            color: #1A8C14;
        }

        .plan-selector select {
            padding: 8px 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
            background-color: #f8f9fa;
            font-size: 14px;
            cursor: pointer;
            outline: none;
        }

        /* Estadísticas - MODIFICADO: Recuadros más pequeños para que quepan en una hilera */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr); /* 7 columnas para que quepan en una hilera */
            gap: 10px;
            margin-bottom: 25px;
        }

        .stat-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s;
            cursor: pointer;
            min-width: 0; /* Para que se ajuste al espacio disponible */
        }

        .stat-box:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .stat-box.active {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 2px solid #1A8C14;
        }

        .stat-title {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 700;
            color: #1A8C14;
        }

        /* Tabla - MODIFICADO: Nueva estructura */
        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .data-table th {
            background: linear-gradient(135deg, #1A8C14 0%, #136b10 100%);
            color: white;
            text-align: left;
            padding: 15px;
            font-weight: 600;
            position: relative;
            cursor: pointer;
        }

        .data-table th:hover {
            background: linear-gradient(135deg, #136b10 0%, #0f5210 100%);
        }

        .sort-icon {
            margin-left: 5px;
            font-size: 12px;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid #eaeaea;
        }

        .data-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .data-table tr:hover {
            background-color: #e6f4ea;
            cursor: pointer;
        }

        /* MODIFICADO: Colores de estado actualizados según especificaciones */
        .status-new {
            background-color: #28a745 !important; /* Verde oscuro para nuevos (sin revisión) */
        }

        .status-visited {
            background-color: #90ee90 !important; /* Verde claro para visitados (sin revisión) */
        }

        .status-review {
            background-color: #ffc107 !important; /* Amarillo para revisado */
        }

        .status-correct {
            background-color: white !important; /* SOLO los finalizados son blancos */
        }

        /* NUEVO: Estilo para enlaces en la columna Estado */
        .estado-link {
            color: #1A8C14;
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .estado-link:hover {
            text-decoration: underline;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            right: 0;
            border-radius: 5px;
        }

        .dropdown-content a {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1;
            border-radius: 5px;
        }

        .show {
            display: block;
        }

        /* Paginación - ELIMINADA: Ya no se necesita paginación */
        .pagination {
            display: none; /* Ocultar la paginación */
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, #1A8C14 0%, #136b10 100%);
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: auto;
            font-size: 14px;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .stats-container {
                grid-template-columns: repeat(4, 1fr); /* 4 columnas en pantallas más pequeñas */
            }
        }

        @media (max-width: 992px) {
            .career-item {
                min-width: 110px;
                font-size: 12px;
                padding: 6px 10px;
            }

            .stats-container {
                grid-template-columns: repeat(3, 1fr); /* 3 columnas en tablets */
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .top-icons {
                top: 120px;
                padding: 8px 15px;
            }

            .container {
                margin-top: 160px;
            }

            .career-item {
                min-width: 100px;
                font-size: 11px;
                padding: 5px 8px;
            }

            .search-box {
                width: 100%;
                margin-top: 15px;
            }

            .info-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .stats-container {
                grid-template-columns: repeat(2, 1fr); /* 2 columnas en móviles */
            }
        }

        @media (max-width: 576px) {
            .careers-container {
                gap: 6px;
            }

            .career-item {
                min-width: 90px;
                font-size: 10px;
                padding: 4px 6px;
            }

            .stat-box {
                padding: 10px;
            }

            .stat-value {
                font-size: 18px;
            }

            .stats-container {
                grid-template-columns: 1fr; /* 1 columna en móviles muy pequeños */
            }
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <img src="../Imagenes/ipn.png" alt="IPN Logo" class="logo">
        <div class="title">Sistema de Prácticas Profesionales</div>
        <img src="../Imagenes/logo blanco.png" alt="UPIICSA Logo" class="logo">
    </header>

    <div class="top-icons">
        <img src="../Imagenes/icono_mensaje.png" alt="Mensaje" class="icon">
        <img src="../Imagenes/icono_notificacion.png" alt="Notificaciones" class="icon">
        <div class="dropdown" style="margin-left: auto;">
            <span>Colaborador</span>
            <img src="../Imagenes/icono_usuario.png" alt="Usuario" class="icon" onclick="toggleDropdown()">
            <div id="userDropdown" class="dropdown-content">
                <a href="perfil.html">Perfil</a>
                <a href="../index.html">Cerrar sesión</a>
            </div>
        </div>
    </div>

    <!-- Barra de carreras - MODIFICADO: Ahora está más arriba y sin separación al hacer scroll -->
    <nav class="careers-nav">
        <div class="careers-title">Selecciona una Carrera:</div>
        <div class="careers-container">
            <div class="career-item active" data-career="transporte">Transporte</div>
            <div class="career-item" data-career="informatica">Ingeniería en Informática</div>
            <div class="career-item" data-career="industrial">Ingeniería Industrial</div>
            <div class="career-item" data-career="ferroviaria">Ferroviaria</div>
            <div class="career-item" data-career="ciencias">Ciencias de la Informática</div>
            <div class="career-item" data-career="admin">Administración Industrial</div>
            <div class="career-item" data-career="sisa">Ingeniería en Sistemas Automotrices (SISA)</div>
        </div>
    </nav>

    <!-- Contenido de información -->
    <section class="info-container">
        <div class="info-header">
            <h2 class="info-title" id="selectedCareer">Información de Transporte</h2>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Buscar alumno...">
            </div>
        </div>

        <!-- Selector de plan - NUEVO -->
        <div class="plan-selector">
            <label for="planSelect">Filtrar por Plan:</label>
            <select id="planSelect">
                <option value="general">General (Todos los planes)</option>
                <!-- Los planes específicos se cargarán dinámicamente -->
            </select>
        </div>

        <!-- Estadísticas - MODIFICADO: Ahora son clickeables y más pequeñas -->
        <div class="stats-container" id="careerStats">
            <!-- Las estadísticas se cargarán dinámicamente -->
        </div>

        <!-- Tabla de datos - MODIFICADO: Nueva estructura -->
        <div class="table-container">
            <table class="data-table" id="careerTable">
                <thead>
                <tr>
                    <th data-column="plan">Plan de Estudios <span class="sort-icon">▼</span></th>
                    <th data-column="genero">Género <span class="sort-icon">▼</span></th>
                    <th data-column="nombre">Nombre <span class="sort-icon">▼</span></th>
                    <th data-column="boleta">Boleta <span class="sort-icon">▼</span></th>
                    <th data-column="estado">Estado <span class="sort-icon">▼</span></th>
                </tr>
                </thead>
                <tbody id="tableBody">
                <!-- Los datos de la tabla se cargarán dinámicamente -->
                </tbody>
            </table>
        </div>

        <!-- Paginación - ELIMINADA: Ya no se necesita paginación -->
        <div class="pagination" id="pagination">
            <!-- Los botones de paginación se generarán dinámicamente -->
        </div>
    </section>

    <footer>
        <p>Instituto Politécnico Nacional - UPIICSA © 2025 | Sistema de Prácticas Profesionales</p>
    </footer>
</div>

<script>
    // Planes de estudio por carrera según especificaciones
    const careerPlans = {
        transporte: ["Plan del 1/1/1996", "Plan del 1/7/2010", "Plan del 2021"],
        informatica: ["Plan del 1/1/2001", "Plan del 1/2/2010", "Plan del 2021"],
        industrial: ["Plan del 1/1/1996", "Plan del 1/7/2010", "Plan del 1/1/2022"],
        ferroviaria: ["Plan del 2020"],
        ciencias: ["Plan del 1/5/1998", "Plan del 1/6/2010", "Plan del 2021"],
        admin: ["Plan del 1/4/1990", "Plan del 1/5/1998", "Plan del 1/6/2010", "Plan del 2021"],
        sisa: ["Plan del 6/8/2007"]
    };

    // Datos para cada carrera - MODIFICADO: Ahora usa los planes específicos
    const careerData = {
        transporte: {
            nombre: "Transporte",
            estudiantes: [
                { plan: "Plan del 1/1/1996", genero: "Masculino", nombre: "Santiago Hernandez Martínez", boleta: "2021402087", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/7/2010", genero: "Femenino", nombre: "Ana López García", boleta: "2021402156", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2021", genero: "Masculino", nombre: "Carlos Méndez Ruiz", boleta: "2021402189", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/7/2010", genero: "Femenino", nombre: "María Fernández Soto", boleta: "2021402210", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 1/1/1996", genero: "Masculino", nombre: "Jorge Ramírez López", boleta: "2021402234", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Laura Torres Sánchez", boleta: "2021402256", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/7/2010", genero: "Masculino", nombre: "Miguel Ángel Cruz", boleta: "2021402278", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Patricia Jiménez", boleta: "2021402290", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/1/1996", genero: "Masculino", nombre: "Roberto Sánchez Díaz", boleta: "2021402312", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/7/2010", genero: "Femenino", nombre: "Gabriela Morales Sánchez", boleta: "2021402334", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2021", genero: "Masculino", nombre: "Fernando Díaz López", boleta: "2021402356", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/1/1996", genero: "Femenino", nombre: "Patricia Castro Ruiz", boleta: "2021402378", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 1/7/2010", genero: "Masculino", nombre: "Ricardo Vargas Castro", boleta: "2021402390", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Laura Gómez Pérez", boleta: "2021402412", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/1/1996", genero: "Masculino", nombre: "Santiago Hernandez Martínez", boleta: "2021402434", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/7/2010", genero: "Femenino", nombre: "Ana López García", boleta: "2021402456", estado: "Finalizado", status: "correct" }
            ]
        },
        informatica: {
            nombre: "Ingeniería en Informática",
            estudiantes: [
                { plan: "Plan del 1/1/2001", genero: "Femenino", nombre: "Ana López García", boleta: "2021402156", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/2/2010", genero: "Masculino", nombre: "Carlos Méndez Ruiz", boleta: "2021402189", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "María Fernández Soto", boleta: "2021402210", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 1/1/2001", genero: "Masculino", nombre: "Jorge Ramírez López", boleta: "2021402234", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/2/2010", genero: "Femenino", nombre: "Laura Torres Sánchez", boleta: "2021402256", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2021", genero: "Masculino", nombre: "Miguel Ángel Cruz", boleta: "2021402278", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/1/2001", genero: "Femenino", nombre: "Patricia Jiménez", boleta: "2021402290", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/2/2010", genero: "Masculino", nombre: "Roberto Sánchez Díaz", boleta: "2021402312", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Gabriela Morales Sánchez", boleta: "2021402334", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/1/2001", genero: "Masculino", nombre: "Fernando Díaz López", boleta: "2021402356", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/2/2010", genero: "Femenino", nombre: "Patricia Castro Ruiz", boleta: "2021402378", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 2021", genero: "Masculino", nombre: "Ricardo Vargas Castro", boleta: "2021402390", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/1/2001", genero: "Femenino", nombre: "Laura Gómez Pérez", boleta: "2021402412", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/2/2010", genero: "Masculino", nombre: "Santiago Hernandez Martínez", boleta: "2021402434", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Ana López García", boleta: "2021402456", estado: "Finalizado", status: "correct" }
            ]
        },
        industrial: {
            nombre: "Ingeniería Industrial",
            estudiantes: [
                { plan: "Plan del 1/1/1996", genero: "Femenino", nombre: "María Fernández Soto", boleta: "2021402256", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/7/2010", genero: "Masculino", nombre: "Jorge Ramírez López", boleta: "2021402278", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/1/2022", genero: "Femenino", nombre: "Laura Gómez Pérez", boleta: "2021402290", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/1/1996", genero: "Masculino", nombre: "Roberto Sánchez Díaz", boleta: "2021402312", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/7/2010", genero: "Femenino", nombre: "Gabriela Morales Sánchez", boleta: "2021402334", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/1/2022", genero: "Masculino", nombre: "Fernando Díaz López", boleta: "2021402356", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/1/1996", genero: "Femenino", nombre: "Patricia Castro Ruiz", boleta: "2021402378", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/7/2010", genero: "Masculino", nombre: "Ricardo Vargas Castro", boleta: "2021402390", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/1/2022", genero: "Masculino", nombre: "Santiago Hernandez Martínez", boleta: "2021402412", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/1/1996", genero: "Femenino", nombre: "Ana López García", boleta: "2021402434", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 1/7/2010", genero: "Masculino", nombre: "Carlos Méndez Ruiz", boleta: "2021402456", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/1/2022", genero: "Femenino", nombre: "Laura Torres Sánchez", boleta: "2021402478", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/1/1996", genero: "Masculino", nombre: "Miguel Ángel Cruz", boleta: "2021402490", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/7/2010", genero: "Femenino", nombre: "Patricia Jiménez", boleta: "2021402512", estado: "Finalizado", status: "correct" }
            ]
        },
        ferroviaria: {
            nombre: "Ferroviaria",
            estudiantes: [
                { plan: "Plan del 2020", genero: "Masculino", nombre: "Roberto Sánchez Díaz", boleta: "2021402356", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2020", genero: "Femenino", nombre: "Laura Gómez Pérez", boleta: "2021402378", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 2020", genero: "Masculino", nombre: "Carlos Méndez Ruiz", boleta: "2021402390", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2020", genero: "Femenino", nombre: "Ana López García", boleta: "2021402412", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 2020", genero: "Masculino", nombre: "Jorge Ramírez López", boleta: "2021402434", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2020", genero: "Femenino", nombre: "María Fernández Soto", boleta: "2021402456", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 2020", genero: "Masculino", nombre: "Miguel Ángel Cruz", boleta: "2021402478", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2020", genero: "Femenino", nombre: "Patricia Jiménez", boleta: "2021402490", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 2020", genero: "Masculino", nombre: "Roberto Sánchez Díaz", boleta: "2021402512", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 2020", genero: "Femenino", nombre: "Gabriela Morales Sánchez", boleta: "2021402534", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 2020", genero: "Masculino", nombre: "Fernando Díaz López", boleta: "2021402556", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2020", genero: "Femenino", nombre: "Patricia Castro Ruiz", boleta: "2021402578", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 2020", genero: "Masculino", nombre: "Ricardo Vargas Castro", boleta: "2021402590", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 2020", genero: "Femenino", nombre: "Laura Gómez Pérez", boleta: "2021402612", estado: "Documentos de Inicio", status: "new" }
            ]
        },
        ciencias: {
            nombre: "Ciencias de la Informática",
            estudiantes: [
                { plan: "Plan del 1/5/1998", genero: "Femenino", nombre: "Patricia Castro Ruiz", boleta: "2021402456", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/6/2010", genero: "Masculino", nombre: "Fernando Díaz López", boleta: "2021402478", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Gabriela Morales Sánchez", boleta: "2021402490", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 1/5/1998", genero: "Masculino", nombre: "Ricardo Vargas Castro", boleta: "2021402512", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/6/2010", genero: "Femenino", nombre: "Laura Gómez Pérez", boleta: "2021402534", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2021", genero: "Masculino", nombre: "Santiago Hernandez Martínez", boleta: "2021402556", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/5/1998", genero: "Femenino", nombre: "Ana López García", boleta: "2021402578", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 1/6/2010", genero: "Masculino", nombre: "Carlos Méndez Ruiz", boleta: "2021402590", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Laura Torres Sánchez", boleta: "2021402612", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/5/1998", genero: "Masculino", nombre: "Miguel Ángel Cruz", boleta: "2021402634", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/6/2010", genero: "Femenino", nombre: "Patricia Jiménez", boleta: "2021402656", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 2021", genero: "Masculino", nombre: "Roberto Sánchez Díaz", boleta: "2021402678", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/5/1998", genero: "Femenino", nombre: "Gabriela Morales Sánchez", boleta: "2021402690", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/6/2010", genero: "Masculino", nombre: "Fernando Díaz López", boleta: "2021402712", estado: "Documentos de Inicio", status: "review" }
            ]
        },
        admin: {
            nombre: "Administración Industrial",
            estudiantes: [
                { plan: "Plan del 1/4/1990", genero: "Femenino", nombre: "Gabriela Morales Sánchez", boleta: "2021402556", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 1/5/1998", genero: "Masculino", nombre: "Ricardo Vargas Castro", boleta: "2021402578", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/6/2010", genero: "Masculino", nombre: "Santiago Hernandez Martínez", boleta: "2021402590", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Ana López García", boleta: "2021402612", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/4/1990", genero: "Masculino", nombre: "Carlos Méndez Ruiz", boleta: "2021402634", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 1/5/1998", genero: "Femenino", nombre: "Laura Torres Sánchez", boleta: "2021402656", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/6/2010", genero: "Masculino", nombre: "Miguel Ángel Cruz", boleta: "2021402678", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Patricia Jiménez", boleta: "2021402690", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/4/1990", genero: "Masculino", nombre: "Roberto Sánchez Díaz", boleta: "2021402712", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 1/5/1998", genero: "Femenino", nombre: "Gabriela Morales Sánchez", boleta: "2021402734", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 1/6/2010", genero: "Masculino", nombre: "Fernando Díaz López", boleta: "2021402756", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 2021", genero: "Femenino", nombre: "Patricia Castro Ruiz", boleta: "2021402778", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 1/4/1990", genero: "Masculino", nombre: "Ricardo Vargas Castro", boleta: "2021402790", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 1/5/1998", genero: "Femenino", nombre: "Laura Gómez Pérez", boleta: "2021402812", estado: "Documentos de Inicio", status: "new" }
            ]
        },
        sisa: {
            nombre: "Ingeniería en Sistemas Automotrices (SISA)",
            estudiantes: [
                { plan: "Plan del 6/8/2007", genero: "Masculino", nombre: "Roberto Sánchez Díaz", boleta: "2021402634", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 6/8/2007", genero: "Femenino", nombre: "Laura Gómez Pérez", boleta: "2021402656", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 6/8/2007", genero: "Masculino", nombre: "Carlos Méndez Ruiz", boleta: "2021402678", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 6/8/2007", genero: "Femenino", nombre: "Ana López García", boleta: "2021402690", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 6/8/2007", genero: "Masculino", nombre: "Jorge Ramírez López", boleta: "2021402712", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 6/8/2007", genero: "Femenino", nombre: "María Fernández Soto", boleta: "2021402734", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 6/8/2007", genero: "Masculino", nombre: "Miguel Ángel Cruz", boleta: "2021402756", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 6/8/2007", genero: "Femenino", nombre: "Patricia Jiménez", boleta: "2021402778", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 6/8/2007", genero: "Masculino", nombre: "Roberto Sánchez Díaz", boleta: "2021402790", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 6/8/2007", genero: "Femenino", nombre: "Gabriela Morales Sánchez", boleta: "2021402812", estado: "Finalizado", status: "correct" },
                { plan: "Plan del 6/8/2007", genero: "Masculino", nombre: "Fernando Díaz López", boleta: "2021402834", estado: "Documentos de Inicio", status: "new" },
                { plan: "Plan del 6/8/2007", genero: "Femenino", nombre: "Patricia Castro Ruiz", boleta: "2021402856", estado: "Documentos de Seguimiento", status: "visited" },
                { plan: "Plan del 6/8/2007", genero: "Masculino", nombre: "Ricardo Vargas Castro", boleta: "2021402878", estado: "Documentos de Inicio", status: "review" },
                { plan: "Plan del 6/8/2007", genero: "Femenino", nombre: "Laura Gómez Pérez", boleta: "2021402890", estado: "Finalizado", status: "correct" }
            ]
        }
    };

    // Variables globales - MODIFICADO: Eliminada la paginación
    let currentCareer = 'transporte';
    let currentFilter = 'all';
    let currentPlan = 'general';

    // Función para calcular estadísticas a partir de los datos de la tabla
    function calculateStats(estudiantes) {
        const stats = {
            total: estudiantes.length,
            sinRevision: 0,
            revisado: 0,
            finalizados: 0,
            seguimiento: 0,
            hombres: 0,
            mujeres: 0
        };

        estudiantes.forEach(estudiante => {
            // Contar por estado
            if (estudiante.status === 'new' || estudiante.status === 'visited') {
                stats.sinRevision++;
            } else if (estudiante.status === 'review') {
                stats.revisado++;
            } else if (estudiante.status === 'correct') {
                stats.finalizados++;
            }

            // Contar por tipo de documento
            if (estudiante.estado.includes('Seguimiento')) {
                stats.seguimiento++;
            }

            // Contar por género
            if (estudiante.genero === 'Masculino') {
                stats.hombres++;
            } else if (estudiante.genero === 'Femenino') {
                stats.mujeres++;
            }
        });

        return stats;
    }

    // Función para cargar los planes de estudio en el selector
    function loadPlanSelector(careerKey) {
        const planSelect = document.getElementById('planSelect');
        const plans = careerPlans[careerKey] || [];

        // Limpiar opciones excepto "General"
        planSelect.innerHTML = '<option value="general">General (Todos los planes)</option>';

        // Agregar planes específicos de la carrera
        plans.forEach(plan => {
            const option = document.createElement('option');
            option.value = plan;
            option.textContent = plan;
            planSelect.appendChild(option);
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        const careerItems = document.querySelectorAll('.career-item');
        const tableHeaders = document.querySelectorAll('.data-table th');
        const searchInput = document.getElementById('searchInput');
        const planSelect = document.getElementById('planSelect');

        // Cargar datos iniciales (Transporte)
        loadCareerData('transporte');

        // Eventos para elementos de carrera
        careerItems.forEach(item => {
            // Efecto hover
            item.addEventListener('mouseenter', function() {
                if (!this.classList.contains('active')) {
                    this.style.backgroundColor = '#d4edda';
                    this.style.borderColor = '#1A8C14';
                }
            });

            item.addEventListener('mouseleave', function() {
                if (!this.classList.contains('active')) {
                    this.style.backgroundColor = '#f1f8ff';
                    this.style.borderColor = 'transparent';
                }
            });

            // Selección de carrera
            item.addEventListener('click', function() {
                // Remover clase active de todos los items
                careerItems.forEach(i => {
                    i.classList.remove('active');
                    i.style.backgroundColor = '#f1f8ff';
                    i.style.borderColor = 'transparent';
                });

                // Agregar clase active al item seleccionado
                this.classList.add('active');
                this.style.backgroundColor = '#1A8C14';
                this.style.borderColor = '#136b10';

                // Cargar información de la carrera seleccionada
                const career = this.getAttribute('data-career');
                currentCareer = career;
                loadCareerData(career);
            });
        });

        // Ordenar tabla al hacer clic en los encabezados
        tableHeaders.forEach(header => {
            header.addEventListener('click', function() {
                const column = this.getAttribute('data-column');
                sortTable(column);
            });
        });

        // Buscador
        searchInput.addEventListener('input', function() {
            filterTableBySearch(this.value);
        });

        // Selector de plan
        planSelect.addEventListener('change', function() {
            currentPlan = this.value;
            updateTable();
        });
    });

    function toggleDropdown() {
        document.getElementById("userDropdown").classList.toggle("show");
    }

    // Cerrar el menú desplegable si se hace clic fuera de él
    window.onclick = function(event) {
        if (!event.target.matches('.icon')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            for (var i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            }
        }
    }

    // Función para cargar datos de la carrera - MODIFICADO: Sin paginación
    function loadCareerData(careerKey) {
        const career = careerData[careerKey];
        if (!career) return;

        // Actualizar título
        document.getElementById('selectedCareer').textContent = `Información de ${career.nombre}`;

        // Cargar planes de estudio en el selector
        loadPlanSelector(careerKey);

        // Calcular estadísticas a partir de los datos de la tabla
        const stats = calculateStats(career.estudiantes);

        // Actualizar estadísticas
        const statsContainer = document.getElementById('careerStats');
        statsContainer.innerHTML = `
        <div class="stat-box ${currentFilter === 'all' ? 'active' : ''}" data-filter="all">
          <div class="stat-title">Total Alumnos</div>
          <div class="stat-value">${stats.total}</div>
        </div>
        <div class="stat-box ${currentFilter === 'sinRevision' ? 'active' : ''}" data-filter="sinRevision">
          <div class="stat-title">Sin Revisión</div>
          <div class="stat-value">${stats.sinRevision}</div>
        </div>
        <div class="stat-box ${currentFilter === 'revisado' ? 'active' : ''}" data-filter="revisado">
          <div class="stat-title">Revisado</div>
          <div class="stat-value">${stats.revisado}</div>
        </div>
        <div class="stat-box ${currentFilter === 'finalizados' ? 'active' : ''}" data-filter="finalizados">
          <div class="stat-title">Finalizados</div>
          <div class="stat-value">${stats.finalizados}</div>
        </div>
        <div class="stat-box ${currentFilter === 'seguimiento' ? 'active' : ''}" data-filter="seguimiento">
          <div class="stat-title">Seguimiento</div>
          <div class="stat-value">${stats.seguimiento}</div>
        </div>
        <div class="stat-box ${currentFilter === 'hombres' ? 'active' : ''}" data-filter="hombres">
          <div class="stat-title">Hombres</div>
          <div class="stat-value">${stats.hombres}</div>
        </div>
        <div class="stat-box ${currentFilter === 'mujeres' ? 'active' : ''}" data-filter="mujeres">
          <div class="stat-title">Mujeres</div>
          <div class="stat-value">${stats.mujeres}</div>
        </div>
      `;

        // Hacer que las estadísticas sean clickeables
        const statBoxes = document.querySelectorAll('.stat-box');
        statBoxes.forEach(box => {
            box.addEventListener('click', function() {
                const filter = this.getAttribute('data-filter');
                currentFilter = filter;
                updateTable();
            });
        });

        // Actualizar tabla
        updateTable();
    }

    // Función para actualizar la tabla - MODIFICADO: Sin paginación
    function updateTable() {
        const career = careerData[currentCareer];
        if (!career) return;

        let filteredStudents = [...career.estudiantes];

        // Aplicar filtro por plan
        if (currentPlan !== 'general') {
            filteredStudents = filteredStudents.filter(student => student.plan === currentPlan);
        }

        // Aplicar filtro si no es "all"
        if (currentFilter !== 'all') {
            // Aquí implementarías la lógica de filtrado según la estadística seleccionada
            // Por simplicidad, en este ejemplo solo filtramos por estado
            filteredStudents = filteredStudents.filter(student => {
                // Esta es una implementación básica, deberías adaptarla a tus necesidades
                if (currentFilter === 'sinRevision') return student.status === 'new' || student.status === 'visited';
                if (currentFilter === 'revisado') return student.status === 'review';
                if (currentFilter === 'finalizados') return student.status === 'correct';
                if (currentFilter === 'seguimiento') return student.estado.includes('Seguimiento');
                if (currentFilter === 'hombres') return student.genero === 'Masculino';
                if (currentFilter === 'mujeres') return student.genero === 'Femenino';
                return true;
            });
        }

        // Actualizar tabla sin paginación
        const tableBody = document.getElementById('tableBody');
        tableBody.innerHTML = '';

        filteredStudents.forEach(estudiante => {
            const row = document.createElement('tr');
            row.classList.add(`status-${estudiante.status}`);

            // Agregar evento de clic para cambiar el estado de "Sin Revisión"
            row.addEventListener('click', function() {
                if (estudiante.status === 'new') {
                    // Cambiar de "new" (sin clic) a "visited" (con clic)
                    estudiante.status = 'visited';
                    row.classList.remove('status-new');
                    row.classList.add('status-visited');

                    // Recalcular estadísticas después del cambio
                    const career = careerData[currentCareer];
                    const stats = calculateStats(career.estudiantes);
                    updateStatsDisplay(stats);
                }
            });

            // MODIFICADO: Agregar enlaces para los estados específicos
            let estadoHTML = estudiante.estado;
            if (estudiante.estado === "Documentos de Seguimiento") {
                estadoHTML = `<a href="documentosTermino.html" class="estado-link">${estudiante.estado}</a>`;
            } else if (estudiante.estado === "Documentos de Inicio") {
                estadoHTML = `<a href="documentosInicio.html" class="estado-link">${estudiante.estado}</a>`;
            }

            row.innerHTML = `
          <td>${estudiante.plan}</td>
          <td>${estudiante.genero}</td>
          <td>${estudiante.nombre}</td>
          <td>${estudiante.boleta}</td>
          <td>${estadoHTML}</td>
        `;

            tableBody.appendChild(row);
        });
    }

    // Función para actualizar la visualización de estadísticas
    function updateStatsDisplay(stats) {
        const statsContainer = document.getElementById('careerStats');
        statsContainer.innerHTML = `
        <div class="stat-box ${currentFilter === 'all' ? 'active' : ''}" data-filter="all">
          <div class="stat-title">Total Alumnos</div>
          <div class="stat-value">${stats.total}</div>
        </div>
        <div class="stat-box ${currentFilter === 'sinRevision' ? 'active' : ''}" data-filter="sinRevision">
          <div class="stat-title">Sin Revisión</div>
          <div class="stat-value">${stats.sinRevision}</div>
        </div>
        <div class="stat-box ${currentFilter === 'revisado' ? 'active' : ''}" data-filter="revisado">
          <div class="stat-title">Revisado</div>
          <div class="stat-value">${stats.revisado}</div>
        </div>
        <div class="stat-box ${currentFilter === 'finalizados' ? 'active' : ''}" data-filter="finalizados">
          <div class="stat-title">Finalizados</div>
          <div class="stat-value">${stats.finalizados}</div>
        </div>
        <div class="stat-box ${currentFilter === 'seguimiento' ? 'active' : ''}" data-filter="seguimiento">
          <div class="stat-title">Seguimiento</div>
          <div class="stat-value">${stats.seguimiento}</div>
        </div>
        <div class="stat-box ${currentFilter === 'hombres' ? 'active' : ''}" data-filter="hombres">
          <div class="stat-title">Hombres</div>
          <div class="stat-value">${stats.hombres}</div>
        </div>
        <div class="stat-box ${currentFilter === 'mujeres' ? 'active' : ''}" data-filter="mujeres">
          <div class="stat-title">Mujeres</div>
          <div class="stat-value">${stats.mujeres}</div>
        </div>
      `;

        // Reasignar eventos a las nuevas estadísticas
        const statBoxes = document.querySelectorAll('.stat-box');
        statBoxes.forEach(box => {
            box.addEventListener('click', function() {
                const filter = this.getAttribute('data-filter');
                currentFilter = filter;
                updateTable();
            });
        });
    }

    // Función para ordenar la tabla
    function sortTable(column) {
        const table = document.getElementById('careerTable');
        const tbody = table.querySelector('tbody');
        const rows = Array.from(tbody.querySelectorAll('tr'));

        // Determinar el orden actual y cambiar
        const currentOrder = table.getAttribute('data-sort-order') || 'asc';
        const newOrder = currentOrder === 'asc' ? 'desc' : 'asc';
        table.setAttribute('data-sort-order', newOrder);

        // Ordenar las filas
        rows.sort((a, b) => {
            const aValue = a.querySelector(`td:nth-child(${getColumnIndex(column)})`).textContent;
            const bValue = b.querySelector(`td:nth-child(${getColumnIndex(column)})`).textContent;

            if (newOrder === 'asc') {
                return aValue.localeCompare(bValue);
            } else {
                return bValue.localeCompare(aValue);
            }
        });

        // Limpiar y reinsertar las filas ordenadas
        tbody.innerHTML = '';
        rows.forEach(row => tbody.appendChild(row));

        // Actualizar iconos de ordenamiento
        updateSortIcons(column, newOrder);
    }

    // Función para obtener el índice de la columna
    function getColumnIndex(column) {
        const headers = document.querySelectorAll('.data-table th');
        for (let i = 0; i < headers.length; i++) {
            if (headers[i].getAttribute('data-column') === column) {
                return i + 1;
            }
        }
        return 1;
    }

    // Función para actualizar iconos de ordenamiento
    function updateSortIcons(column, order) {
        const headers = document.querySelectorAll('.data-table th');
        headers.forEach(header => {
            const icon = header.querySelector('.sort-icon');
            if (header.getAttribute('data-column') === column) {
                icon.textContent = order === 'asc' ? '▲' : '▼';
            } else {
                icon.textContent = '▼';
            }
        });
    }

    // Función para filtrar la tabla por búsqueda - MODIFICADO: Sin paginación
    function filterTableBySearch(searchTerm) {
        const career = careerData[currentCareer];
        if (!career) return;

        let filteredStudents = [...career.estudiantes];

        // Aplicar filtro de búsqueda
        if (searchTerm.trim() !== '') {
            filteredStudents = filteredStudents.filter(student =>
                student.nombre.toLowerCase().includes(searchTerm.toLowerCase()) ||
                student.boleta.includes(searchTerm)
            );
        }

        // Aplicar filtro de estadística si está activo
        if (currentFilter !== 'all') {
            filteredStudents = filteredStudents.filter(student => {
                if (currentFilter === 'sinRevision') return student.status === 'new' || student.status === 'visited';
                if (currentFilter === 'revisado') return student.status === 'review';
                if (currentFilter === 'finalizados') return student.status === 'correct';
                if (currentFilter === 'seguimiento') return student.estado.includes('Seguimiento');
                if (currentFilter === 'hombres') return student.genero === 'Masculino';
                if (currentFilter === 'mujeres') return student.genero === 'Femenino';
                return true;
            });
        }

        // Aplicar filtro por plan
        if (currentPlan !== 'general') {
            filteredStudents = filteredStudents.filter(student => student.plan === currentPlan);
        }

        // Actualizar tabla sin paginación para búsquedas
        const tableBody = document.getElementById('tableBody');
        tableBody.innerHTML = '';

        filteredStudents.forEach(estudiante => {
            const row = document.createElement('tr');
            row.classList.add(`status-${estudiante.status}`);

            row.addEventListener('click', function() {
                if (estudiante.status === 'new') {
                    estudiante.status = 'visited';
                    row.classList.remove('status-new');
                    row.classList.add('status-visited');

                    // Recalcular estadísticas después del cambio
                    const career = careerData[currentCareer];
                    const stats = calculateStats(career.estudiantes);
                    updateStatsDisplay(stats);
                }
            });

            // MODIFICADO: Agregar enlaces para los estados específicos
            let estadoHTML = estudiante.estado;
            if (estudiante.estado === "Documentos de Seguimiento") {
                estadoHTML = `<a href="documentosTermino.html" class="estado-link">${estudiante.estado}</a>`;
            } else if (estudiante.estado === "Documentos de Inicio") {
                estadoHTML = `<a href="documentosInicio.html" class="estado-link">${estudiante.estado}</a>`;
            }

            row.innerHTML = `
          <td>${estudiante.plan}</td>
          <td>${estudiante.genero}</td>
          <td>${estudiante.nombre}</td>
          <td>${estudiante.boleta}</td>
          <td>${estadoHTML}</td>
        `;

            tableBody.appendChild(row);
        });
    }
</script>
</body>
</html>